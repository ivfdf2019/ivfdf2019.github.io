---
layout: 2019_timetable
permalink: /2019/timetable
title: Provisional timetable
---
<section id="speakers" class="bg-light-gray">
      <div id="testtimetable" class="timetable"></div>
      <h3>Friday Night</h3>
      <div id="fritimetable" class="timetable"></div>
      <h3>Saturday Night</h3>
      <div id="sattimetable" class="timetable"></div>
<script>
      
      function padStart(s, count, character) {
            for (count = count-s.length; count>0; count--) {
                  s = character + s;
            }
            return s;
      }
      
      function getLocalTimezoneIso() {
            return "+"+Math.floor(new Date().getTimezoneOffset() / -60)+":00"
      }
      
      function makeDate(timeString, dayString) {
            timeString = timeString.replace(/h/i,":");
            var date = new Date("2019-03-" + dayString + "T" + padStart(timeString, 5, '0') + ":00" + getLocalTimezoneIso());
            if (date.getHours()<6) {
                  // events after midnight actually happen on following day
                  date.setDate(date.getDate() + 1);
            }
            return date;
      }
      
      function cleanBand(band) {
            band.begin = makeDate(band.begin, "01");
            band.end = makeDate(band.end, "01");
      }
      
      function friNightBand(band) {
            return band.day=="Friday";
      }
      
      function satNightBand(band) {
            return band.day=="Saturday";
      }
      
      function doDay(id, bands) {
            var venues = {};
            bands.forEach(function(band) {
                  venues[band.venue] = 0
                  cleanBand(band)
            });
            venues = Object.keys(venues);

            var timetable = new Timetable();
            timetable.setScope(18,2);
            timetable.addLocations(venues);

            bands.forEach(function(band) {
                  timetable.addEvent(band.title + " ("+band.dance+")", band.venue, band.begin, band.end, { url: '#' });
            })

            var renderer = new Timetable.Renderer(timetable);
            renderer.draw(id);
      }
      
      bands = [
      {% for band in site.2019_bands %}
            {title: "{{ band.title }}", begin: "{{ band.begin }}", end: "{{ band.end }}", venue: "{{ band.venue }}", dance: "{{ band.dance }}", day: "{{ band.day }}"},
      {% endfor %}
      ];
      
      {% for band in site.2019_otherevents %}
            bands.push({title: "{{ band.title }}", begin: "{{ band.begin }}", end: "{{ band.end }}", venue: "{{ band.venue }}", dance: "{{ band.dance }}", day: "{{ band.day }}"})
      {% endfor %}
      
      doDay('#fritimetable', bands.filter(friNightBand));
      doDay('#sattimetable', bands.filter(satNightBand));
       
      var ftimetable = new Timetable();
      ftimetable.setScope(18,2);
      ftimetable.addLocations(["The Jam House"]);
      ftimetable.addEvent('Scottish Contra', 'The Jam House', new Date(2015,7,17,19), new Date(2015,7,17,23,30), { url: '#' });
      ftimetable.addEvent('English Contra', 'The Jam House', new Date(2015,7,17,22), new Date(2015,7,18,00,30), { url: '#' });
      var renderer = new Timetable.Renderer(ftimetable);
      renderer.draw('#testtimetable');
      
    </script>
</section>
