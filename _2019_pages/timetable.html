---
layout: 2019_timetable
permalink: /2019/timetable
title: Provisional timetable
---
<section id="speakers" class="bg-light-gray">
      <p>All workshops and dances are called gender free unless indicated with *.</p>
      <h2>Evening Schedule</h2>
      <p>The exact timings and venues are potentially subject to change, but the bands and days should be correct.</p>
       <h3>Friday Night</h3>
      <div id="fritimetable" class="timetable"></div>
      <h3>Saturday Night</h3>
      <div id="sattimetable" class="timetable"></div>
      <h2>Daytime schedule</h2>
       <p>The daytime schedule is still being finalised. Workshops will run 9am-1.15pm both days. The Display Ceilidh will run 2-5pm on Saturday. The Survivors Ceilidh will run 1.30-4pm on Sunday.</p>
      <h3>Saturday</h3>
      <div id="satdaytimetable" class="timetable"></div>
      <h3>Sunday</h3>
      <div id="sundaytimetable" class="timetable"></div>
<script>
      
      function padStart(s, count, character) {
            for (count = count-s.length; count>0; count--) {
                  s = character + s;
            }
            return s;
      }
      
      function getLocalTimezoneIso() {
            return "+"+ padStart(Math.floor(new Date().getTimezoneOffset() / -60)+":00", 5, '0');
      }
      
      function makeDate(timeString, dayString) {
            timeString = timeString.replace(/h/i,":");
            var date = new Date("2019-03-" + dayString + "T" + padStart(timeString, 5, '0') + ":00" + getLocalTimezoneIso());
            if (date.getHours()<6) {
                  // events after midnight actually happen on following day
                  date.setDate(date.getDate() + 1);
            }
            return date;
      }
      
      function cleanBand(band) {
            band.begin = makeDate(band.begin, "01");
            band.end = makeDate(band.end, "01");
      }
      
      function isFriday(band) {
            return band.day=="Friday";
      }
      
      function isSaturday(band) {
            return band.day=="Saturday";
      }
      
      function isSunday(band) {
            return band.day=="Sunday";
      }
      
      var begintimes = {
            "1": "9h00",
            "2": "10h30",
            "3": "12h00",
            "4": "9h00",
            "5": "10h30",
            "6": "12h00"
      }
      
      var endtimes = {
            "1": "10h15",
            "2": "11h45",
            "3": "13h15",
            "4": "10h15",
            "5": "11h45",
            "6": "13h15"
      }
      
      var days = {
            "1": "Saturday",
            "2": "Saturday",
            "3": "Saturday",
            "4": "Sunday",
            "5": "Sunday",
            "6": "Sunday"
      }
      
      function processWorkshops(workshops) {
            return workshops.map(function(workshop) {
                  return {
                        title: workshop.title,
                        begin: begintimes[workshop.position],
                        end: endtimes[workshop.position],
                        day: days[workshop.position],
                        dance: "",
                        venue: workshop.venue,
                        gender: workshop.gender
                  };
            });
      }
      
      function doDay(id, bands, begin, end) {
            var venues = {};
            bands.forEach(function(band) {
                  venues[band.venue] = 0
                  cleanBand(band)
            });
            venues = Object.keys(venues);

            var timetable = new Timetable();
            timetable.setScope(begin,end);
            timetable.addLocations(venues);

            bands.forEach(function(band) {
                  var fulltitle = band.title + band.gender
                  if (band.dance != "") {
                        fulltitle += " ("+band.dance+")"
                  }
                  timetable.addEvent(fulltitle , band.venue, band.begin, band.end, { url: '#' });
            })

            var renderer = new Timetable.Renderer(timetable);
            renderer.draw(id);
      }
      
      bands = [
      {% for band in site.2019_bands %}
            {title: "{{ band.title }}", begin: "{{ band.begin }}", end: "{{ band.end }}", venue: "{{ band.venue }}", dance: "{{ band.dance }}", day: "{{ band.day }}"},
      {% endfor %}
      ];
      
      {% for band in site.2019_otherevents %}
            bands.push({title: "{{ band.title }}", begin: "{{ band.begin }}", end: "{{ band.end }}", venue: "{{ band.venue }}", dance: "{{ band.dance }}", day: "{{ band.day }}"})
      {% endfor %}
      
      daytime = processWorkshops(workshops);
      
      doDay('#fritimetable', bands.filter(isFriday), 19, 3);
      doDay('#sattimetable', bands.filter(isSaturday), 19, 3);
      doDay('#satdaytimetable', daytime.filter(isSaturday), 9, 17)
      doDay('#sundaytimetable', daytime.filter(isSunday), 9, 17)
      
    </script>
</section>
